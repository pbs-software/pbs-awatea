PBSawatea Changes
===================================
Authors : RH  = Rowan Haigh
          AME = Andrew Edwards
          PJS = Paul Starr
          CG  = Chris Grandin
-----------------------------------
CRAN package version numbers follow a "major.minor.patch" format (e.g., 1.2.3), where: 
	Major: Indicates a significant change that might break existing code.
	Minor: Indicates the addition of new features or improvements, while generally maintaining backward compatibility.
	Patch: Indicates bug fixes and minor improvements that do not introduce new features.
-----------------------------------

1.8.1 (2025-06-17) [Rcheck=T, Rbuild=T]
  * Documentation
    + Updated a number of Rd files regarding my current office (RH 250616)
    + Changed braced lines to tabular lines in Rd files (RH 250617)

1.8.0 (2023-06-27) [Rcheck=T, Rbuild=T]
  * plotFuns.r
    + Added new function `plotLikes' to plot likelihood profiles. (210510)
    + Modified functions:
      - `mochaLatte' to allow plotting by column (mfcol) instead of by row (mfrow). (RH 230321)
      - `panelBoxes' to better deal with function to calulate ylim. (RH 2022?)
      - `panelChains' to accommodate byrow=T/F in mocahLatte. (RH 230321)
      - `panelTraces' to remove NA values. (RH 220222)
      - `plotACFs' to use output from acf to plot lagged values (RH 220624)
      - `plotMeanAge' to manipulate output. (RH 220207)
    + Small tweaks to functions 
      - `plotSnail' : minor changes (RH 220117) but look for function with same name in PBStools.
      - `plotTraj', `plotVBcatch', `plt.bubbles', `plt.quantBioBB0'
  * utilFuns.r
    + Added new functions:
      - `redo.currentMCMC' to re-run the R components of 'run-masterMCMC.Snw' to get MCMC binary objects. (RH 230124)
      - `repeatMPD' to repeat MPDs for likelihood profiles. (RH 230124)
    + Made modifications (mostly small) to `MAfun' (RH 210225).
  * PBSscape.r
    + Made small modifications, not really worth mentioning.
  * Documentation
    + Updated vignette `PBSawateaIntro' (RH 230628)
    + Updated various Rd files (RH 230628)
      - Merged Rd file for `runSweave' and `runSweaveMCMC' (RH 230629)

1.7.1 (2020-07-10) [Rcheck=F, Rbuild=F]
  * PBSscape.r
    + Modified function `stdRes.CA' (RH 200522)
      - Changed names of R variables to match those in CASAL 6.8 manual:
      - ## Pearson residual = (O-F)/std.dev(O)   : see CASAL 6.8 Manual
      - Fprime <- obj$Fit[idx]*(1.0-obj$Fit[idx]) + 0.1/n   ## F prime (Fournier uses Fitted); not defined previously in function but only added to test calculation of SD
      - Oprime <- obj$Obs[idx]*(1.0-obj$Obs[idx]) + 0.1/n   ## O prime (Coleraine uses Observed); formerly called 'Z' by AME
      - Nprime <- min( obj$SS[idx],1000)                    ## N prime; formerly called 'N' by AME
      - SD     <- sqrt(Oprime/Nprime )                      ## std.dev(O) = SD of observation for a Fournier|Coleraine likelihood
      - result$stdRes[idx] <- res[idx]/SD                   ## Pearson residuals = Normalised residuals for normal error distributions
  * plotFuns.r
    + Modified function `plotSnail' (RH 200624)
      - loop through fisheries (gears) three times for (i) traces, (ii) final cross lines (95% qauntile ranges), and (iii) final median points;
      - offset final crosslines and medians plus/minus a small fraction of Bt/Bmsy (x-axis) so they do not overlap.
    + Modified function `plotTraj' (RH 200604)
      - changed fill of legend box to be transparent or white depending on trajectories being plotted.
    + Modified function `mochaLatte' (RH 200528)
      - limited y-axis values to 5 decimal places.

1.7.0 (2020-05-20) [Rcheck=F, Rbuild=F]
  * PBSscape.r
    + Added new argument `sigmaR' to function `importProjRec'. (RH 200427)
    + Revised function `msyCalc' to detect true maximum in yield curve by filtering out spikes that give false maxima. (RH 200428)
    + Added new function `redo.currentProj' to recalculate currentProj and currentProj2 given new CC and HR policies. (RH 200427)
  * plotFuns.r
    + Changed colour bars in function `plt.catch' from black and blue (PJS cannot distinguish difference on his computer) to black and green. (RH 200423)
    + Changed default arguments and axis control in function `plt.quantBioBB0':
      - changed xyType="lines" to xyType="quantBox"
      - added new arguments `delta' (x-offset for box) and `lwd'
    + Included new argument `despike' when calling function `msyCalc'. (RH 200427)
      - functions calling `msyCalc' include `.compB0.get'
    + Changed label for 'Central run' in function `plotTraj' to a label of supplied by bdat: `bdat$label'. (RH 200428)
  * runADMB.r
    + Added small guidance information to SDNR file header to show user which composition sets correspond to w_j. (RH 200417)
    + Changed source location for MSY input file from base location to MCMC directory. (RH 200416)
      - Needed because in RER runs, PJS would alter reweighted file to fix selectivity parameters to MPD values.
  * run-masterMCMC.Snw
    + Removed last value in `currentProj2' (HR policy) as was done for `currentProj' (CC policy). (RH 200428)
    + Included new argument `sigmaR' when calling function `importProjRec'. (RH 200428)
    + Included new argument `despike' when calling function `msyCalc'. (RH 200427)

1.6.0 (2019-12-09) [Rcheck=F, Rbuild=F]
  * PBSscape.r
    + Transferred selectivity code from 'PBSscape.r' to `plotFuns.r' as function `plt.selectivity'. (RH 190718)
    + Added calls to `changeLangOpts' and `eop' to all plotting routines.
  * plotFuns.r
    + Added new arguments `startYear', `currYear, `sen.lab', and `logR' to function `plotTraj'. (RH 191206)
    + Added new argument `currYear' to function `plotSnail' and ability to use UoverUmsy from mulltiple gear types. (RH 191122)
    + Modified function `plt.stdResids' to plot years insted of points in residual plots (RH 190926)
    + Modified function `plt.ageResidsPOP' (RH 190718)
    + New function `plt.selectivity' -- transferred selectivity code from `PBSscape.r' into plt function. (RH 190718)
    + Transferred function `stdRes.index' from `PBSscape.r' to `plotFuns.r'. (RH 190718)
    + Changed drawing of quantile boxes from rectangles to polygons in functions `plotRmcmcPOP', `plotVBcatch'. (RH 190620)
    + Added calls to `changeLangOpts' and `eop' to all plotting routines.
    + Moved functions `cquantile' and `cquantile.vec' from `plotFuns.r' to `utilFuns.r'.
  * runSweave.r
    + Reorganised order of arguments in function `runSweave', added new arguments `Unames' and `dome'.(RH 190719)
    + Added more species to choices for `sppname'.
  * runSweaveMCMC.r
    + Added new arguments `Unames' and `dome' to function `runSweaveMCMC'. (RH 190719)
    + Revised wrapper function `runMCMC' to properly accept multiple runs and reweights. (RH 190719)
  * utilFuns.r
    + Modified function `findTarget' to detect first year when exceeding target without checking if next year increases. (RH 191204)
    + Added new function `splitGear' to split catches, U, and VB by year from multiple gear types (RH 191202)
    + Moved functions `cquantile' and `cquantile.vec' from `plotFuns.r' to `utilFuns.r'.
  * run-master.Snw
    + Added support for new arguments `Unames' and `dome' in function `runSweave'. (RH 190917)
    + Began collecting prior info for female M2 (natural mortality at maturity); needs finessing.
  * run-masterMCMC.Snw
    + Added support for new arguments `Unames' and `dome' in function `runSweave'. (RH 190917)
    + Reorganised (big time) the structure of this Sweave file
    + Introduced capacity for outputting decsision tables:
      - two types of catch policy: CC=constant catch, HR=harvest rate
      - detects if rebuilding and COSEWIC (3 generation) projections have been evaluated.

1.5.0 (2019-05-31) [Rcheck=T, Rbuild=T]
  * PBSscape.r
    + Assigned `quants3', `quants5', and `boxpars' to the .PBSmodEnv rather than making them global. (RH 190531)
      - Changed plotting functions relying on these objects to use `tcall' instead of `get'.
    + Added a global assigns for `outline' and `boxpars' for the calls to `quantbox' in building pdf docs for MCMC runs.
    + Added a few small tweaks to function `plt.mpdGraphs' (RH 190509)
      - Skip calling plot functions for ages if all fits are equal to zero.
      - Changed data passed to `plotACFs' from `currentMCMC' to `mcmcObj$P'.
      - Changed call to `plotChains' to `panelChains'.
    + Removed function `findTarget' and moved it to `utilFuns.r'.
  * plotFuns.r
    + Repeated `myboxplot.stats' and `qboxplot' in `zzz.r' (for package building) and `plotFuns.r' for running local code only. (RH 190531)
    + Added new function `panelBoxes' to plot quantile plots using `nchains' to delimit separate boxes. (RH 190521)
    + Revised function `mochaLatte' to be more flexible with arguments and to accomodate quantile box limits. (RH 190521)
    + Renamed function `plotChains' to `panelChains' to be consistent with other functions using `mochaLatte'. (RH 190509)
    + Created new function `panelTraces' for comparing parameter traces in `Model Results' appendix. (RH 190509)
    + Revised function `plotACFS' to take paramater MCMCs directly rather than extracting them from a general MCMC object. (RH 190509)
    + Revised function `plotAges' to skip plotting age fits if fits are all zero. (RH 190507)
    + Recreated PBStools' function `quantBox' as `quantbox' to continue reliance only on PBSmodelling. (RH 180403)
      - Note that some PBStools functions may have creeped into the PBSawatea because RH is the only person using PBSawatea.
      - The function `plotBox' has been deprecated in favour of `quantbox' but still exists for a transition period.
    + Revised function `plotCPUE' to remove condtion `all(cvpro==FALSE)' because sometimes (e.g. WWR) all cvpro are zero. (RH 190507)
    + Ditto for function `plotIndexNotLattice' re: cvpro check for logicals (cvpro can only be numeric now). (RH 190509)
    + Revised function `plotSnail' to get UoverUmsy after is has been combined (averaged) across gear types. (RH 190509)
    + Revised function `plotTraj' to deal with 12 WWR sensitivities -- colours, line types, etc. (RH 190516)
    + Revised functions `plt.ageResidsPOP', `plt.cohortResids', `plt.yearResidsPOP' to use `quantbox' rather than `boxplot' (RH 190509)
      - Gag me with a spoon Heather.
      - Also turned the outliers back on (AME had turned them off).
    + Added new function `splineCPUE' to fit spline curves through CPUE data to determine CV process error. (RH 190103)
  * runADMB.r
    + Changed method of reweighting in function `runADMB' and method `setMethod.reweight'. (RH 190404)
      - Previously, choices were based on values (mixed logical|numeric) of `cvpro' and `mean.age'.
      - New method uses vectors of method type for abundance (A.reweight) and composition (C.reweight) with length `N.reweight'.
      - Allows for independent reweighting of CVs for abundance and AF SS (sample size) for composition.
      - Also allows the user to choose which reweighting gets which method (mix and|or match).
      - PJS suggested this for WWR 2019 based on work by Alistair Dunn (NZ ling on Chatham Rise).
  * runSweaveMCMC.r
    + Made small tweaks like checking if `log_qCPUE' was estimated when Ncpue=0. (RH 190425)
  * utilFuns.r
    + Added new function `combGear' to combine values by year from multiple gear types. (RH 190501)
      - e.g., add biomass values, calculate geometric mean of exploitation rates.
    + Moved function `findTarget' from `PBSscape.r' to this `utilFuns.r'.
    + Added new function `getNpan' to get panel number when inside a multi-panel plot. (RH 190501)
  * run-master.Snw
    + Added calls to `save' for `currentRes' and `currentPar'. (RH 190508)
    + Changed figure caption for residual plots to reflect the use of quantile plots over boxplots. (RH 190508)
    + Made other small tweaks to figure captions for consistency.
  * run-masteMCMC.Snw
    + Added the MPD values to `currentMCMC' for use in Appendix F. (RH 190503)
      - currentMCMC$mpd = list(mpd.P=mpd.P, mpd.B=mpd.B, mpd.R=mpd.R)
    + Gather Ucurr earlier in the code; create `prevYear' to index Ucurr.
    + Added `UcurrGM.MCMC' (GM=geometric mean) as a target for `findTarget' when generating reference points.
    + Rearranged order of decision tables -- Bt>LRP, Bt>USR, Bt>Bmsy, ut<umsy, Bt>Bcurr, ut<ucurr, Bt>0.2B0, Bt>0.4B0

1.4.3 (2019-01-07) [Rcheck=F, Rbuild=F]
  * PBSscape.r
    + Changed renaming of output figure files in language loop. (RH 190107)
      - Now use `switch' (as in PBStools) instead of conditional `if'.
    + Changed CA-fit output from specifying number of years on a page to specifying number pages a priori and calculating yrs/page. (RH 181218)
  * plotFuns.r
    + Changed renaming of output figure files in language loop (see PBSscape). (RH 190107)
    + Keep track of `runNo' and rwtNo' in global list object `PBSawatea' to know when a plot is calculating an un-weighted index (rwt=0) (RH 181231).
  * runSweave.r
    + Added new argument `maxcol'; pass `maxcol' and `NCAset' to `run-master.Snw' (RH 181231)
    + Pass `runNo' and `rwtNo' to global list object `PBSawatea'. (RH 181231)
  * runSweaveMCMC.r
    + Pass `runNo' and `rwtNo' to global list object `PBSawatea'. (RH 181231)
  * Sweave
    + Revised `run-master.Snw' (RH 181231)
      - Added new variables `maxcol' and `NCAset' to be populated by function `runSweave'
    + Changed renaming of output figure files in language loop (see PBSscape). (RH 190107)
    + Fixed small bug (missing close brace for \Sexpr) in plotSnail figure caption. (RH 190107)

1.4.2 (2018-10-17) [Rcheck=T, Rbuild=F]
  * Documentation
    + Updated `README.md' file that appears for PBSawatea on GitHub. (RH 181017)
  * PBSscape.r
    + Added argument `op' to function `calc.refProbs', `calc.refProbsHist', and `findTarget'. (RH 181015)
      - To allow for P(B>Brfpt) and P(u<urfpt) or vice versa, where op = >|<.
      - Note that Forrest et al. use probability of being in bad place, where Haigh et al. use prob of being in a good place.
      - Rob Tadey (GMU) prefers the latter (glass-half-full kinda guy).
  * Sweave
    + Changed calls to `calc.refProbs', `calc.refProbsHist', and `findTarget' with new argument `op'. (RH 181015)

1.4.1 (2018-08-02) [Rcheck=F, Rbuild=F]
  * Sweave
    + Modified plot description for `plotChains' plot (RH 180802)
      - old: first segment (green), second segment (red) and final segment (blue)
      - new: first segment (red), second segment (blue) and final segment (black)
    + Fiddled with routine to get `createFdir' and `linguaFranca' from PBStools (package not required in PBSawatea). (RH 180730)
  * plotFuns.r
    + Debugged a small glith in `plotTraj'. (RH 180802)
    + Ensured that lattice-like plots generated by `mochaLatte' never have more rows than columns. (RH 180730)
    + Revised some calls to linguaFranca. (RH 180730)
    + Set the fourth element of `par(oma=c(w,x,y,z))' to 1 in most plots to ensure that xlab labels are not truncated on the right. (RH 180730)
  * PBSscape.r
    + Revised code in `plt.mpdGraphs' that plots selectivity. (RH 180730)
      - French plot was misinterpreting the maturity data because `scape::plotSel' looks for records marked `Maturity' to use as an ogive overlay marked `m'.
    + Reduced white space around figures `plotSel', `pdfBiomass', and `pdfRecruitment'. (RH 180730)
    + Ensured that the `splitChain' plot (via `mochaLatte') never has more rows than columns. (RH 180730)
  * Documentation
    + Updated the `R Documentation' PDF file called `PBSawatea.pdf' (RH 180726)
      - this is not a User's Guide.
    + Added the 2018 RSR (Redstripe Rockfish) data input files. (RH 180726)

1.4.0 (2018-07-26) [Rcheck=T, Rbuild=T]
  * PBSscape.r
    + Introduced new argument `lang' to produced figures in english and french. (RH 180710)
      - For functions that use a lang loop, argument lang=c("e","f"); otherwise lang="e".
      - Translation of english words and phrases is performed by the PBStools' function `linguaFranca'.
    + Moved all plotting functions other than `plt.mpdGraphs' and `plt.mcmcGraphs' to `plotFuns.r' (RH 180710)
      - Utility functions may be moved later to `utilFuns.r'.
  * plotFuns.r
    + Introduced new argument `lang' to produced figures in english and french. (RH 180710)
      - For functions that use a lang loop, argument lang=c("e","f"); otherwise lang="e".
    + Added all plotting functions other than `plt.mpdGraphs' and `plt.mcmcGraphs'. (RH 180710)
  * Sweave
    + Revised `run-master.Snw' & 'run-masterMCMC.Snw. (RH 180717)
      - Now uses the `lang' argument in function calls, primarily to `plt.mpdGraphs' and `plt.mcmcGraphs'
      - Simultaneoulsy creates english and french figures.
  * runSweave|runSweaveMCMC
    + Added new argument `lang' for the code to embed in the Sweave documents when processing for a model run. (RH 180712)
  * Documentation
    + Updated Rd files to include a description of the `lang' argument when used. (RH 180726)

1.3.0 (2018-05-24)
  * Documentation
    + Added Rd files for new functions -- `mochaLatte', `plotACFs', `plotCI', `plotMeanAge', `plotTraj', and `tex.that.vec' (RH 180524)
      - Fixed existing Rd files with Codoc errors identified by R check.
  * PBSscape.r
    + Created function `flash.cat' to replace use of PBStools' `flush.cat' because PBSawatea does not depend on PBStools. (RH 180523)
    + Modified function `plotBVBnorm' to remove word `virgin' and to italicise parameters in legend. (RH 180516)
    + Removed code for plotting mean ages and put it into a function called `plotMeanAge', which is where it started life. (RH 180416)
    + Removed deprecated function `importCol2'. (RH 180416)
    + Modified function `plotChains' to use `mochaLatte' and moved it from `PBSscape.r' into `plotFuns.r' (RH 180410)
      - Deprecated previous version to `plotChains.lattice'.
    + Switched position of functions `plt.mpdGraphs' and `plt.mcmcGraphs' so that MPD precedes MCMC.
    + Process ongoing to move plotting functions to `plotFuns.r'.
  * plotFuns.r
    + Modified function `plt.quantBio' to better display the quantile boxes. (RH 180507)
    + Created new function `plotTraj' to display all median trajectories (base+sens) in one figure. (RH 180504)
    + Fixed bug in `plotSnail' to get the correct coordinate for the final-point cross-bars. (RH 180504)
    + Created a new function `mochaLatte' (mockLattice) to potentially replace the need for lattice plots. (RH 180427)
    + Modified function `plt.exploit' to show gradations warm colours at h=0.05 increments. (RH 180425)
    + Modified function `plt.recdev' to show positive deviations in blue and negative in red. (RH 180425)
    + Modified function `plotAges' (and calls in 'plt.mpdGraps') to better show fitted vs. observed props at age. (RH 180417)
      - Note: scape and lattice functions (e.g., plotCA) are very time-consuming to manipulate; eventually replace them with our own code.
    + Added function `plotMeanAge' which is now called from 'plt.mpdGraps' rather than having plotMeanAge code sitting bare in plt.mpdGraphs. (RH 180416)
    + Sorted potting functions by name in the file.
  * utilFuns.r
    + Created a new function `tex.that.vec' to convert a vector to a phrase 'x, y, and z'. (RH 180507)
      - Superceded by function `texThatVec' in `PBStools' which has been developed further.
  * Sweave (was not updated in last revision even though changes are recorded there)
    + Revised `run-master.Snw'
      - Added new chunk `vicars_and_tarts' to deal with runs where the initial re-weighting was not performed and an MPD was generated as part of a previous MCMC.
      - Sent `ptype' into tracking list object `PBSawatea' in `.PBSmodEnv'.
    + Revised `run-masterMCMC.Snw'
      - Saved `currentProj' later in the code so that it contains projected recruitment.
      - Removed CPUE paramters from the MCMC object `currentMCMC$P'. (RH 180416)
      - Updated method for determining closest catch policy to mean catch.
      - Changed fixed quantile numbers to refer to either `quants3' or `quants5'.
      - Inroduced use of `tex.that.vec' (which evolved into a new function `texThatVec' in PBStools).
      - Tried to reduce the use of the word `percentile'.
    + Wrapped up old Snw files into `ghosts-of-Sweave-past.7z' and deleted them.
      - Yes I know the versioning system keeps track but I'm not taking chances.
      - I'm pretty sure that Hadley is involved somehow...
    + Added my (RH) most recent `resDocSty.sty' file.
      - Yes I know that DFO CSAP has an `official' version, but I prefer to keep control of my beautiful documents.
  * runSweave.r
    + Modified function `runSweave' and `runSweaveMCMC' to pass on the value of `Ncpue' to their respective Sweave files. (RH 180416)
    + Changed number of panels for annual catch-at-age fits from 20 to 25.
    + Introduced the passing of `Ncpue' from the function to the MPD Sweave file.
  * runSweaveMCMC.r
    + Introduced the passing of `Ncpue' from the function to the MCMC Sweave file.
  * runADMB.r
    + Modified function `reweight' to show the sum of deviations of survey/cpue SDNRs from 1. (RH 180411)
  * menuFuns.r
    + Changed all calls to `windows' to a call to `do.call' to pass R check (RH 180523)
      - Functions in this module have never been tested by moi and likely will never be used; think deprecation!

1.2.2 (2018-04-06)
  * PBSscape.r
    + Removed function `plotIndex2' from PBSawatea as it does not seem to be used. (RH 180406)
    + Revised functions `plotIndexNotLattice' to better plot the survey indices. (RH 180406)
    + Revised function `plotCPUE' to use the replacement function `plotCI' and moved it into `plotFuns.r'. (RH 180405)
  * plotFuns.r
    + Created new function `plotCI' to replace `gplots::plotCI'. (RH 180406)
  * Sweave
    + Revised `run-master.Snw' & 'run-masterMCMC.Snw. (RH 180405)
      - Stop creating eps figures if the choice is to use png figures, and vice-versa.
      - Added a new 2-figure function `twofigWH' to add plots with differing heights in the same figure.
      - Added figure tagging through \pdftooltip from the package `pdfcomment'.
      - Changed the BtB0|catchSmall figure to be either eps or png (twas fixed as an eps figure).

1.2.1 (2018-04-04)
  * runSweave.r
    + Save `ptype' in `PBSawatea' list object, which is stored in environment `.PBSmodEnv' via `packList'. (RH 180404)
  * runSweaveMCMC.r
    + Save `ptype' in `PBSawatea' list object, which is stored in environment `.PBSmodEnv' via `packList'. (RH 180404)
  * PBSscape.r
    + Changed arguments `ptypes=c("eps","png")' to `ptypes=tcall(PBSawatea)$ptype' to avoid generating deprecated eps files. (RH 180404)
  * plotFuns.r
    + Changed arguments `ptypes=c("eps","png")' to `ptypes=tcall(PBSawatea)$ptype' to avoid generating deprecated eps files. (RH 180404)
  * Input
    + Added 2017 POP 5ABC model input files. (RH 180404)

1.2.0 (2017-12-04)
  * runADMB.r
    + Revised function `setMethod.reweight' to accept negative cvpro (reduce CV) and fixed cvpro handling for CPUE index series to match that of surveys. (RH 171204)
  * PBSscape.r
    + Modified plotting functions (171201)
      - Standardise quantiles, using global objects `quants3' and `quants5', and pngres=400.
      - Removed function `plotBmcmcPOP' as it was not being used anywhere.
      - Modified `plt.idx', `plt.stdResids', and `plotCPUE' to better accomodate CPUE index series.
      - Modified `plt.stdResids' to better show quantiles in qqnorm plots. (RH 171201)
  * runSweave.r
    + Modified functions in `runSweave' and 'run-master.Snw' (RH 171201)
      - better handle surveys with missing catch-at-age series (surveys no longer need to be ordered by those with c@a first).
  * plotFuns.r
    + Removed function `compBmsy' and added a much-evolved version of this function (same name) to package PBStools. (RH 170908)

1.1.0 (2017-08-11)
  * Sweave
    + Modified `resDocSty.sty' for POP 2017 (RH 170801)
      - Reset fonts to inconsolata zi4 font for ttdefault and winfonts arial for rmdefault and sfdefault.
      - Added CG's macro for CSAP landscape page.
      - Reset in-text citation delimiters.
    + Modified `run-master.Snw' for POP 2017 (RH 170607)
      - Added `ptype' to choose between `eps' and `png' image files.
      - Added `redo.Graphs' to hasten code editing when figures do not need renewing.
      - Added autocorrelation plots using `acf'
    + Modified `run-masterMCMC.Snw' for POP 2017 (RH 170606)
      - Added `ptype' to choose between `eps' and `png' image files.
      - Added `@rmdome' control  flag to remove lines that report dome-shaped selectivity output.
      - Saved `currentRes' to `currentRes.rda'   --  useful to have when compiling the final results appendix.
      - Saved `currentMCMC' to `currentMCMC.rda' --  useful to have when compiling the final results appendix.
      - Saved `currentProj' to `currentProj.rda' --  useful to have when compiling the final results appendix.
      - Saved `currentMSY' to `currentMSY.rda'   --  useful to have when compiling the final results appendix.
      - Disabled copying of MPD figures as code now uses \graphicspath.
      - Added autocorrelation plots using `acf'
      - Added new pairs plot with all parameters on one page (rather than 6 per page)
      - Added new phase (snail) plot to show to show the position of the 2010 assessment point; also changed plot to u_t-1/u_MSY vs. B_t/u_MSY.
  * R code
    + Modified function `runSweaveMCMC.r' for POP 2017 (RH 170607)
      - Added two new arguments -- `ptype' (for plot type eps or png) and `domeS' (logical: use dome-shaped selectivity?)
      - Added switch to use MiKTeX's executable `texify' with ptype=="png".
    + Modified function `runSweaveMCMC.r' for POP 2017 (RH 170607)
      - Added two new arguments -- `ptype' (for plot type eps or png) and `redo.Graphs' (logical: if T rebuild the figure files)
      - Added switch to use MiKTeX's executable `texify' with ptype=="png".
    + Modified function `plotFuns.r' for POP 2017 (RH 170607)
      - Added `redo.Graphs' as an argument to all plot functions.
      - Added new function `plotACFs' using stats::acf function.
    + Modified `PBSscape.r' for POP 2017 (RH 170606)
      - Changed calls to `png' to use arguments units="in" and res=pngres
      - Disabled labelling of cvpro on plots if cvpro==0
      - Added calls to `plotACFs' (autocorrelation plots)
      - Added call to pairs plot with all combos on one page.
      - Modified `plotSnail' (phase plot) to show to show the position of the 2010 assessment point; also changed plot to u_t-1/u_MSY vs. B_t/u_MSY.
    + Modified `runADMB.r' for POP 2017 (RH 170605)
      - Fixed a serious flaw (caught during the POP RPR process by us) in the interpretation of cvpro=0:
      -  code interpreted it as cvpro=FALSE then started adding iterative re-weighting based on old SDNR method.
      - Potential problem still exists if user wants to subtract process error, i.e., cvpro < 0:
      -  squaring in Francis variance formula only assumes that cvpro is added.

1.0.5 (2017-03-28)
  * Sweave
    + Added my `CSAPrefs.bib' file for posterity. (RH 170328)
    + Updated function `runSweave' to allow for removal of lines in `run-master.Snw' not wanted in ResDoc using code `@rmresdoc'. (RH 170328)
    + Re-ordered sequence of plots in `run-master.Snw'. (RH 170328)

1.0.4 (2016-11-30)
  * R code
    + Revised function `runSweave' and `run-master.Snw' to allow plots of observed and estimated proportion-ages for commercial catch-age fits to span multiple pages. (RH 161130)

1.0.3 (2016-11-29)
  * Sweave
    + Added `lattice::' to `trellis.device' in `run-master.Snw' and `run-masterMCMC.Snw' because function is called outside PBSawatea functions. (RH 161129)
  * Documentation
    + Promoted `lattice' in Imports section of DESCRIPTION as `lattice.device' does not seem to be recognised by PBSawatea functions. (RH 161128)
    + Changed backticks ` in DESCRIPTION to single quotes ' (Kurt Hornik 2016-09-20)

1.0.2 (2016-05-19)
  * R code
    + Used `PBSmodelling::view' for setting the method for 'view' when using an AWATEA class. (RH 160519)
    + Removed function `.flush.cat' as it appears in PBStools. (RH 160519)

1.0.1 (2016-05-18)
  * Documentation
    + Cleaned up some more `no visible global function definition' CRANkiness. (RH 160518)
    + Changed DESCRIPTION and NAMESPACE from Imports PBSmodelling to Depends PBStools, which sucks in PBSmodelling and other functionality. (RH 160512)

1.0.0 (2016-04-06)
  * Documentation
    + Updated the vignette `PBSawateaIntro.Rnw'. (RH 160406)
    + Updated `resDocSty.sty' to my current version; added the TDS-compliant uarial fonts `uarial.tds.zip' and the bibliography style file `resDoc.bst'. (RH 160504)
    + Experienced a NAMESPACE epiphany: (RH 160405)
      - In NAMESPACE, package can either be in `import' OR `importFrom', NOT both.
      - But all packages named in `import' AND `importFrom' must appear in DESCRIPTION after `Imports:'.
      - Thanks Uwe Ligges -- <<http://r.789695.n4.nabble.com/Namespace-dependency-not-required-td4481914.html>>
      - Also see <<http://stackoverflow.com/questions/13085481/namespace-dependencies-not-required>>
    + Imported all namespace functions from `methods', `PBSmodelling', `scape', `plotMCMC', `xtable', and `lattice'. (RH 160405)
    + Added explicit `importFrom' values for packages `coda' (mcmc), `gplots' (plotCI), and `Hmisc' (Cbind, panel.xYplot). (RH 160405)
    + Changed package Depends to Imports for: scape, plotMCMC, xtable, gplots, lattice
    + Switched to semantic versioning and changed DESCRIPTION file (RH 160405)

0.14  2015-06-15
  * Documentation
    + Last update to Google Code before transferring pbs-awatea repository to GitHub. (RH 150615)
  * Input
    + Added the Awatea inputs for the Redbanded and Yellowtail (incomplete) Rockfish assessments in 2014. (RH 150615)

0.13  2014-11-23
  * R code
    + Modified function `runSweaveMCMC' to fix a bug (non-expansion of gear for Table 2 VB and u) introduced by the Nov 17 fix. (RH 141123)
    + Modified function `runSweaveMCMC' and 'run-masterMCMC.Snw' to handled a bug replacing dummy placeholder `999' with g when g>=10. (RH 141117)
    + Made changes to accommodate no age data. (RH 141014)
    + Modified `runSweave.r', `runSweaveMCMC.r', `run-master.Snw', `runADMB.r', `plotFuns.r', and `PBSscape.r' to handle no ageing data; not fully tested. (RH 141113)
    + Removed argument `awateaPath' from `runSweave' and `runSweaveMCMC' as it is only used in `runADMB'. (RH 141113)
    + Fixed a bug in subfunction `biteMe' in `runSweave' and `runSweaveMCMC' to properly handle CApos (not just SApos). (RH 141112)
    + Transferred code that builds MPD fits to proportions-at-age from body of `plt.mpdGraphs' to new function `plotAges'. (RH 140930)
    + Revised function `plotIndexNotLattice' to clean up output files and generate PNGs as well as EPSs. (RH 140929)
    + Fixed a small bug in the weighting subfunction `wfun' in `runADMB' that crashed when calculating variance of a single number. (RH 140929)
    + Revised R code and Sweave code extensively to deal with more than one commercial gear type. (RH 140926)
    + Modified function `runSweaveMCMC' to include a new argument `skip.last.year' for compatibility with older 2010 POP 5ABC assessment. (RH 140826)
  * Sweave
    + Fixed a bug in `run-masterMCMC.Snw' that tried to collect estimated mu (selectivity) when mu was not estimated. (RH 141121)
    + Added in some appendix info to `run-master.Snw' in case the MPD is to be used as an appendix (Rob needed it for YTR). (RH 141006)
    + Debugged a few things in `run-master.Snw' and `run-masterMCMC.Snw' that were broken for 1-gear situation. (RH 141006)
    + Changed Table 3 of `run-master.Snw' to a longtable so that it doesn't print off the bottom of the page. (RH 140929)
    + Modified Sweave master documents `run-master.Snw' and `run-masterMCMC.Snw' for compatibility with older 2010 POP 5ABC assessment. (AME 140825)
  * Input
    + Compressed input files by year into 7z-archives (ASCII files were taking up a lot of space). (RH 141017)
    + Added 2010 POP 5ABC input files. (AME 140825)
  * Documentation
    + Switched dependency from package `scapeMCMC' to `plotMCMC' as Arni now separates Coleraine functions form plotting functions. (RH 140929)
    + Added vignette to briefly describe the package and past DFO assessments using Awatea. (AME/RH 140826)

0.12  2013-11-12
  * Documentation
    + SGR and ROL assessments finished. Cleaned up code and Rd files for incorporation into R-package. (RH 131112)
  * Sweave
    + Sweave MCMC can now take in tex files of MPD results (that user prepares by extracting pieces from run-master.Snw build). (RH 131104)
    + Added a few more flags to determine if the Sweave file is meant to be a working paper or a ResDoc (`@rmresdoc` used for both). (RH 131001)
    + Revised the Sweave MCMC to allow the inclusion of a discussion file specific to a single run (e.g., `resultsMCMC-run22.tex`). (RH 130930)
    + More updates and debugging, mostly for MCMC stuff. (RH 130927)
    + Debugged problems in Sweave MCMC. (RH 130920)
    + Revised `run-MasterSweave.Snw` and `runSweaveMCMC.r`. (RH 130916)
    + Revised `run-Master.Snw` and various functions. (RH 130912)
  * R code
    + Revised `runSweave` and various other functions to work with 2 sexes; improved some of the output figures. (RH 130906)
    + Revised extensively various functions to deal flexibly with one-sex models and optional CPUE series. (RH 130905)
      - Recoding occurred in `runADMB.r`, `runSweave.r`, `PBSscape.r`, and `run-Master.tex`.

0.11  2013-02-20
  * Documentation
    + Updated just for compatibility with R-3.0.0. (RH 130419)
  * R code
    + Revised functions `importProjRec` and `plt.mcmcGraphs`; revised `run-masterMCMC.Snw`. (AME 130220)

0.10  2012-10-16  RH
  * R code
    + Revised function 'msyCalc' to report the convergence numbers. (AME 121016)
    + Updated function 'readAD' to handle inactive data identified by "###" as opposed to comments identified by "#". (RH 121016)
    + Updated functions 'plt.mpdGraphs' and 'plt.mcmcGraphs' (e.g., lower panel of pairs plot reports the correlation coefficient). (AME 121015)
    + Updated function 'runSweaveMCMC' and 'run-masterMCMC.Snw' to accommodate variable numbers of pairs plots. (RH 120910)
    + Tweaked margins for figures in function 'plotIndexNotLattice'; updated Rd files. (RH 120906)
    + Updated functions in R files 'runSweave.r', 'runSweaveMCMC.r', and 'PBSscape.r';
      - separated menu functions from 'PBSscape.r' to 'menuFuns.r'. (RH 120821)
    + Updated functions 'plt.mcmcGraphs' and 'plotSnail' to work more generally. (AME 120817)
    + Updated 'panel.curve' in  function 'plotDensPOPparsPrior'. (AME 120816)
    + Re-wrote the function that selects and generates prior distributions using 'switch'. (AME 120815)
    + Fixed bug in function 'plotVBcatch'. (AME 120815)
    + Resolved a minor bug in the function 'findTarget' which crashed when number of projection years were too short to calculate generation-time reference criteria. (120814)
    + Added new function 'importEva' to import the Hessian eigenvalues from an Awatea file, usually called 'Awatea.eva'. (RH 120810)
    + Updated 'plotBars' to determine start year from results file. (RH 120810)
    + Added new function 'importLik' to import an Awatea likelihood file, usually called 'likelihood.dat'. (RH 120810)
    + Modified 'runADMB' to handle situations when 'Awatea.cor' and 'Awatea.std' are not available ( when -nohess is specified in MPD call). (RH 120802)
    + Added new function 'plotBars' to illustrate how an age composition compares with an equilibrium age structure. (RH 120801)
    + Modified 'importRes' to import virgin vulnerable and spawning biomass values. (RH 120731)
    + Added new function 'importCor' to import the Awatea correlation file. (RH 120730)
    + Added new functions 'importPar' and 'importStd'  to import all and estimated parameters, respectively. (RH 120727)
    + Updated AWATEAdata class (not thoroughly tested yet). (RH 120727)
    + Updated 'runSweave' to handle surveys with missing age composition data. (RH 120726)
    + Updated 'runADMB' to find the system exectuable file 'Awatea.exe' using the 'awateaPath' argument. (RH 120725)
    + Updated the 'runMPD' wrapper for 'runSweave'. (RH 120725)
    + Updated 'runSweave' and 'run-Master.Snw' to be more flexible wrt the number of surveys. (120719)
    + Updated 'runADMB', 'runSweave', 'runSweaveMCMC' to deal with POP in WCVI and WCHG. (RH 120718)
  * Sweave
    + Updated Sweave files 'run-master.Snw' and 'run-masterMCMC.Snw'. (120821)
    + Cleaned and debugged 'run-masterMCMC.Snw' further; still not finished for fixed M & H options. (AME 120817)
    + Debugged 'run-masterMCMC.Snw' up to prior functions section (AME will take it from there). (RH 120814)
    + Added 'input' directory for the Awatea input files used; format = spp-area-run.txt. (RH 120802)
  * Documentation
    + Implemented Brian Ripley's suggestion to remove NOTES about 'no visible binding for global variable xxx':
      - if(getRversion() >= "2.15.1") globalVariables(names=c(...), package="PBSawatea") (RH 120717)

0.09  2011-12-20  RH
  * Documentation
    + Added documentation for AWATEAdata S4 class; cleaned up mismatches caught by Rcheck. (RH 111220)
  * R code
    + Added new function 'compBmsy' to compare biomass posteriors relative to Bmsy. (RH 111219)
    + Revised function 'plotBox' to handle vector data not in list format. (RH 111215)
    + Updated function 'compB0' to allow the choice of reference criteria and points for plotting. (RH 111215)

0.08  2011-11-09  RH
  * Documentation
    + R-2.14.0 requires namespace and loading via '.onLoad' (RH 111109)

0.07  2011-07-20  RH
  * R code
    + Revised function 'compB0' to satisfy AME's 'attention to detail'. (RH 110720)
    + Added new function 'tabSAR' to create output tables for the SAR (Science Advisory Report). (RH 110718)
    + Added new function 'compB0' to compare various reference points relative to B0. (RH 110713)
    + Added modified version of 'boxplot' called 'plotBox' to use quantiles in whiskers. (RH 110713)

0.06  2011-07-11  RH
  * Documentation
    + Added the PDF summary of package functions. (RH 110711)
    + Added support document 'Latex.pdf' to .../trunk/documentation (not in package). (RH 110711)
    + Added documentation for new functions 'srFun' and 'importProjRec'. (RH 110711)
  * R code
    + Updated versions of 'ymrScape.r' and 'ymrrun-masterMCMC.Snw' (AME 110708)

0.05  2011-07-04  RH
  * Documentation
    + Added Rd documentation: (RH 110705)
      - 'plt.ssbVbCatch', 'plt.stdResids', 'PBSawatea'
    + Added Rd documentation: (RH 110704)
      - 'importMCMC.ddiff', 'importProj.ddiff', 'msyCalc', 'refPoints', 'refPointsB0',
      - 'plotSnail', 'plotDensPOPparsPrior', 'plotBVBnorm', 'plotCPUE', 'plt.mpdGraphs',
      - 'plt.mcmcGraphs', 'plt.quantBio', 'plt.quantBioBB0', 'plt.numR'
    + Added Rd documentation: (RH 110630)
      - 'plt.ageResidsPOP', 'plt.ageResidsqqPOP', 'plt.yearResidsPOP', 'plt.cohortResids',
      - 'plt.allTraces', 'plt.expRate', 'plt.idx', 'plotIndexNotLattice', 'plotTracePOP',
      - 'plotChains', 'cquantile', 'cquantile.vec', 'plotDensPOP', 'plotDensPOPpars',
      - 'get.resFile', 'mainMenu', 'loadMenu', 'mpdMenu', 'mcmcMenu', 'utilMenu'
    + Added a number of support documents to '/tunk/documentation'. (RH 110630)
  * R code
    + Added functions 'plotTracePOP', 'cquantile', 'plotDensPOP', and 'plotDensPOPpars'. (RH 110630)
    + Removed calls to runSweave that should not have been active. (RH 110630)

0.04  2011-06-29  RH
  * Documentation
    + Added Rd documentation: (RH 110629)
      - 'plotB2', 'plotBmcmcPOP', 'plotVBcatch', 'plotVBnorm', 'plotRmcmcPOP', 'plotIndex2',
      - 'allEqual', 'close.allWin', 'graphics', 'panLab', 'panLegend', 
      - 'calc.projExpect', 'calc.projExpect2', 'calc.projProbs', 'calc.projProbs2', 'calc.refProbs',
      - 'calc.refVal', 'getYrIdx', 'out.pmTables', 'stdRes.CA', 'stdRes.index', 'MAfun2'

0.03  2011-06-28  RH
  * Documentation
    + Added Rd documentation for functions 'findTarget', 'importCol2', 'load.allResFiles'. (RH 110628)
  * R code
    + Added AME's suite of scape functions 'ymrScape.r' (no Rd files). (RH 110628)
    + Transferred function 'makeErrMat' from package PBSfishery to PBSawatea. (RH 110628)
    + Added functions 'runSweaveMCMC' and 'runMCMC'. (RH 110628)
  * Sweave
    + Added AME's Sweave files 'ymrrun-masterMCMC.Snw' and 'ymrrun-masterMCMC20yrProjs.Snw' to the 'inst/snw' directory. (RH 110628)

0.02  2011-06-27  RH
  * R code
    + Added functions 'runSeave' and 'runMPD'. (RH 110627)
  * Sweave
    + Added AME's Sweave file 'ymrrun-master.Snw' to the 'inst/snw' directory. (RH 110627)

0.01  2011-06-24  RH
  * R code
    + Added functions 'importRes', 'runADMB', 'readAD', and 'reweight'; set Methods for 'view', 'fix', and 'write'. (RH 110624)
